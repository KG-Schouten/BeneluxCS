<!DOCTYPE html>
{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/esea.css') }}">
{% endblock %}

{% block title %}ESEA{% endblock %}

{% block content %}

<!-- center-aligned tabs -->
<div class="esea-wrapper">
  <ul class="season-nav nav nav-tabs" id="eseaTabs" role="tablist">
    {% for season in season_info %}
      {% set label = "" %}
      {% if season.event_start and season.event_end %}
        {% if current_time >= season.event_start and current_time <= season.event_end %}
          {% set label = "ongoing" %}
        {% elif current_time >= season.event_start - 604800 and current_time < season.event_start %} {# 604800 seconds = 7 days #}
          {% set label = "starting soon" %}
        {% endif %}
      {% endif %}
      <li class="nav-item" role="presentation">
        <button 
          class="nav-link d-flex align-items-center gap-2 {% if loop.first %}active{% endif %}" 
          id="season-tab-{{ season.season_number }}"
          data-season="{{ season.season_number }}"
          type="button"
          role="tab"
        >
          <span>Season {{ season.season_number }}</span>
          {% if label %}
            <span class="badge bg-secondary">{{ label }}</span>
          {% endif %}
        </button>
      </li>
    {% endfor %}
  </ul>

  <!-- Content container -->
  <div class="tab-content mt-4" id="season-content">
    <div class="text-muted">Loading...</div>
  </div>
</div>

{% endblock %}

{% block javascript %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/esea.js') }}"></script>
{% endblock %}