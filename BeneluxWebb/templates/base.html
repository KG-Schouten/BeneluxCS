<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      crossorigin="anonymous"
    />
    <link 
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" 
    rel="stylesheet"
    />

    <title>{% block title %}Home{% endblock %}</title>

    <style>
      /* Dark mode styles */
      body.dark-mode {
        background-color: #121212;
        color: #e0e0e0;
      }

      body.dark-mode .navbar {
        background-color: #222 !important;
      }

      body.dark-mode .card {
        background-color: #1e1e1e;
        color: #ddd;
        border-color: #333;
      }

      body.dark-mode .nav-link {
        color: #bbb;
      }

      body.dark-mode .nav-link.active {
        color: #000000;
        background-color: #ddd;
      }

      body.dark-mode .btn-outline-secondary {
        color: #ddd;
        border-color: #555;
      }

      body.dark-mode .btn-outline-secondary:hover {
        background-color: #444;
        border-color: #666;
        color: #fff;
      }

      body.dark-mode .btn-secondary {
        background-color: #555;
        color: #ffffff;
        border-color: #666;
      }

      body.dark-mode .btn-secondary:hover {
        background-color: #666;
        color: #ffffff;
      }

      body.dark-mode .form-inline {
        color: #ddd;
      }

      body.dark-mode .form-control {
        background-color: #333;
        color: #ddd;
        border-color: #555;
      }

      /* Invert Regular season logo when in dark mode */
      body.dark-mode .score-logo {
        filter: invert(1) brightness(1.2) contrast(1.1);
      }

      .division-separator {
        border-bottom: 2px solid #007bff; 
        padding-bottom: 10px; 
        margin-bottom: 20px;
      }

      /* Custom styles for the ESEA stage scores */
      .stage-box {
        border: 2px solid #818181; /* outer border */
        border-radius: 8px;
        padding: 8px 12px;
        margin: 5px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .stage-box {
        position: relative; /* needed for z-index */
        z-index: 10;        /* higher than potential overlays */
        cursor: pointer;    /* to hint interactivity */
      }

      .recent-match-box:hover {
        background-color: #888d91;
        cursor: pointer;
        text-decoration: none; /* keep no underline on hover */
      }

      body.dark-mode .text-muted {
        color: #8a8a8a !important;
      }

      .team-link {
        text-decoration: none;
        color: #ffffff; /* Or whatever you want */
        transition: color 0.3s ease;
      }

      .team-link:hover {
        text-decoration: underline;
        color: #0056b3;
      }
    </style>
  </head>
  
  <body>
    
    <!-- Nav bar top -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-3">
      <!-- Navbar brand or toggler -->
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbar"
        aria-controls="navbar"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Nav bar collapse -->
      <div class="collapse navbar-collapse" id="navbar">
        <!-- Left-aligned nav links -->
        <div class="navbar-nav me-auto">
          <a class="nav-item nav-link" id="home" href="/">Home</a>
          <a class="nav-item nav-link" id="stats" href="/stats">Stats</a>
          <a class="nav-item nav-link" id="teams" href="/teams">Teams</a>
          <a class="nav-item nav-link" id="esea" href="/esea">ESEA</a>
          <a class="nav-item nav-link" id="leaderboard" href="/leaderboard">Leaderboard</a>
        </div>

        <!-- Right-aligned dark mode toggle -->
        <div class="ms-auto">
          <button id="darkModeToggle" class="btn btn-secondary btn-sm" type="button">
            Dark Mode
          </button>
        </div>
      </div>  
    </nav>

    <div class="container">
      {% block content %}
      <h1>Welcome to the Benelux CS Stats Page</h1>
      <p>This is a simple Flask application to display CS stats.</p>
      {% endblock %}
    </div>

    <!-- Bootstrap 5 JS Bundle (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  {% block javascript %}
  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const tabs = document.querySelectorAll('#eseaTabs .nav-link');
    const content = document.getElementById('season-content');

    tabs.forEach(tab => {
      tab.addEventListener('click', function () {
        const season = this.dataset.season;

        // Mark this tab as active, others inactive
        tabs.forEach(t => t.classList.remove('active'));
        this.classList.add('active');

        // Show loading state
        content.innerHTML = '<div class="text-muted">Loading...</div>';

        // Fetch HTML content from server
        fetch(`/esea/season/${season}`)
          .then(res => {
            if (!res.ok) throw new Error("Failed to fetch");
            return res.text();
          })
          .then(html => {
            content.innerHTML = html;

            // Re-initialize tooltips
            var tooltipTriggerList = [].slice.call(content.querySelectorAll('[data-bs-toggle="tooltip"]'));
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
              return new bootstrap.Tooltip(tooltipTriggerEl);
            });
          })
          .catch(err => {
            content.innerHTML = `<div class="text-danger">Error loading season: ${err}</div>`;
          });
      });
    });

    // Auto-load first tab
    tabs[0]?.click();
  });
  </script>

  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const toggleBtn = document.getElementById('darkModeToggle');
    const body = document.body;

    // Load preference from localStorage
    if (localStorage.getItem('darkMode') === 'enabled') {
      body.classList.add('dark-mode');
      toggleBtn.textContent = 'Light Mode';
    }

    toggleBtn.addEventListener('click', function () {
      body.classList.toggle('dark-mode');
      if (body.classList.contains('dark-mode')) {
        toggleBtn.textContent = 'Light Mode';
        localStorage.setItem('darkMode', 'enabled');
      } else {
        toggleBtn.textContent = 'Dark Mode';
        localStorage.setItem('darkMode', 'disabled');
      }
    });
  });
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
      var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
      });
    });
  </script>
  {% endblock %}
  </body>
</html>