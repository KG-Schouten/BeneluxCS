{% for team in teams %}
<div class="card mb-3 mx-auto" style="max-width: 1000px; position: relative;">
    
    <!-- Score box in top-right -->
    <div style="position: absolute; top: 10px; right: 10px; background-color: #000000b9; padding: 6px 10px; border-radius: 3px; font-size: 1.5em;">
        <span style="color: #28a745; font-weight: bold;">{{ team.wins }}</span>
        -
        <span style="color: #dc3545; font-weight: bold;">{{ team.losses }}</span>
    </div>
  
    <div class="card-body d-flex flex-column flex-lg-row align-items-stretch gap-3">
    
        <!-- Left side: Team info and players -->
        <div class="d-flex flex-column flex-grow-1">
            <!-- Team Header -->
            <div class="d-flex align-items-center mb-2">
                <img src="{{ team.team_avatar }}"
                    alt="Team Avatar"
                    width="50" height="50"
                    class="me-3 rounded"
                    style="object-fit: cover;"
                    data-placeholder="{{ url_for('static', filename='img/faceit/team_avatar_placeholder.jpg') }}"
                    onerror="this.onerror=null;this.src=this.dataset.placeholder;">
                <h4 class="mb-1">{{ team.team_name }}</h4>
            </div>
            <small>{{ team.region_name }} - {{ team.division_name }}</small>

            <!-- Players layout -->
            <div class="d-flex mt-3 align-items-center" style="width: 100%;">

                <!-- Main Players -->
                <div class="d-flex flex-grow-1 justify-content-between align-items-center">
                    {% for player in team.players_main %}
                    <div class="text-center">
                        <img src="{{ player.player_avatar }}"
                            alt="{{ player.player_name }}"
                            width="60" height="60"
                            class="rounded-circle mb-1"
                            style="object-fit: cover;"
                            data-placeholder="{{ url_for('static', filename='img/faceit/player_avatar_placeholder.jpg') }}"
                            onerror="this.onerror=null;this.src=this.dataset.placeholder;">
                        <div>
                            <strong>{{ player.player_name }}</strong>
                            <img src="{{ url_for('static', filename='img/flags/' ~ player.player_country ~ '.png') }}"
                                alt="{{ player.player_country }}"
                                width="18"
                                class="ms-1 align-middle">
                        </div>
                        <div class="collapse elo-collapse mt-1 small text-muted"
                            id="elo-{{ team.team_id }}-{{ loop.index }}"
                            data-team-id="{{ team.team_id }}">
                            ELO: {{ player.player_elo }}, Level: {{ player.player_faceit_level }}
                        </div>
                    </div>
                    {% endfor %}
                </div>
                
                <!-- Sub players vertical -->
                <div style="flex: 0 0 160px; border-left: 1px solid #444; padding-left: 15px; margin-left: 20px;">
                    {% for player in team.players_sub %}
                    <div class="d-flex align-items-center mb-2">
                        <img src="{{ player.player_avatar }}"
                                alt="{{ player.player_name }}"
                                width="30" height="30"
                                class="rounded-circle me-2"
                                style="object-fit: cover;"
                                data-placeholder="{{ url_for('static', filename='img/faceit/player_avatar_placeholder.jpg') }}"
                                onerror="this.onerror=null;this.src=this.dataset.placeholder;">
                        <div>
                            {{ player.player_name }}
                            <img src="{{ url_for('static', filename='img/flags/' ~ player.player_country ~ '.png') }}"
                                    alt="{{ player.player_country }}"
                                    width="14" class="ms-1 align-middle">
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- Toggle Button -->
        <div class="d-flex flex-column align-items-stretch justify-content-end" style="min-width: 60px;">
            <button class="btn btn-outline-secondary toggle-details-btn h-50 w-100 d-flex flex-column justify-content-center align-items-center"
                    type="button"
                    data-team-id="{{ team.team_id }}"
                    onclick="toggleTeamDetails(this)">
                <span class="arrow">â†“</span>
            </button>
        </div>
    </div>    
</div>
{% endfor %}